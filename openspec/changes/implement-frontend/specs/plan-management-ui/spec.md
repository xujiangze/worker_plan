# Spec: Plan Management UI

## ADDED Requirements

### Requirement: 计划列表页面
前端 MUST 提供计划列表页面,显示所有工作计划,支持筛选、排序和分页。

#### Scenario: 显示计划列表
**Given** 用户访问计划列表页面 `/plans`
**When** 页面加载完成
**Then** 系统显示所有工作计划的卡片列表
**And** 每个计划卡片显示:
  - 计划标题
  - 计划描述(截断显示)
  - 状态标签(待开始/进行中/已完成/已取消)
  - 优先级标签(高/中/低)
  - 截止日期
  - 进度条(0-100%)
  - 创建时间
**And** 列表按创建时间降序排列

#### Scenario: 按状态筛选计划
**Given** 用户在计划列表页面
**When** 用户点击状态筛选下拉框,选择"进行中"
**Then** 系统只显示状态为"进行中"的计划
**And** 筛选条件显示在页面上
**And** 用户可以清除筛选条件

#### Scenario: 按优先级筛选计划
**Given** 用户在计划列表页面
**When** 用户点击优先级筛选下拉框,选择"高"
**Then** 系统只显示优先级为"高"的计划
**And** 筛选条件显示在页面上

#### Scenario: 按日期范围筛选计划
**Given** 用户在计划列表页面
**When** 用户选择日期范围:2026-01-01 至 2026-01-31
**Then** 系统只显示截止日期在指定范围内的计划
**And** 日期选择器显示选中的范围

#### Scenario: 按创建时间排序
**Given** 用户在计划列表页面
**When** 用户点击排序下拉框,选择"创建时间"
**Then** 系统按创建时间降序排列计划
**And** 用户可以选择升序或降序

#### Scenario: 按截止日期排序
**Given** 用户在计划列表页面
**When** 用户点击排序下拉框,选择"截止日期"
**Then** 系统按截止日期升序排列计划(最近的截止日期在前)

#### Scenario: 分页浏览计划
**Given** 系统中有 100 个工作计划
**When** 用户访问计划列表页面
**Then** 系统显示第 1 页的 20 个计划
**And** 页面底部显示分页组件
**And** 分页组件显示:
  - 当前页码
  - 总页数
  - 上一页/下一页按钮
  - 页码跳转输入框
**When** 用户点击"下一页"按钮
**Then** 系统加载并显示第 2 页的计划

#### Scenario: 搜索计划
**Given** 用户在计划列表页面
**When** 用户在搜索框中输入"文档"
**Then** 系统实时搜索并显示标题或描述包含"文档"的计划
**And** 搜索结果高亮显示匹配的关键词

#### Scenario: 加载状态显示
**Given** 用户访问计划列表页面
**When** 数据正在加载
**Then** 系统显示加载动画或骨架屏
**And** 用户无法进行其他操作

#### Scenario: 空状态显示
**Given** 系统中不存在任何工作计划
**When** 用户访问计划列表页面
**Then** 系统显示空状态提示
**And** 提示信息:"暂无工作计划,点击下方按钮创建"
**And** 显示"创建计划"按钮

### Requirement: 计划详情页面
前端 MUST 提供计划详情页面,显示计划的完整信息和操作按钮。

#### Scenario: 查看计划详情
**Given** 用户在计划列表页面
**When** 用户点击某个计划的卡片
**Then** 系统跳转到计划详情页面 `/plans/:id`
**And** 页面显示计划的完整信息:
  - 计划标题
  - 计划描述(完整显示)
  - 状态标签
  - 优先级标签
  - 截止日期
  - 进度条(可拖动)
  - 创建时间
  - 更新时间
**And** 页面显示操作按钮:
  - "编辑"按钮
  - "删除"按钮
  - "返回列表"按钮

#### Scenario: 查看不存在计划的详情
**Given** 用户访问计划详情页面 `/plans/999`
**When** 计划不存在
**Then** 系统显示 404 错误页面
**And** 提示信息:"计划不存在"
**And** 显示"返回列表"按钮

#### Scenario: 查看已删除计划的详情
**Given** 用户访问计划详情页面 `/plans/1`
**When** 计划已被删除
**Then** 系统显示 404 错误页面
**And** 提示信息:"计划已被删除"

### Requirement: 创建计划表单
前端 MUST 提供创建计划表单,允许用户输入计划信息并创建新计划。

#### Scenario: 打开创建计划表单
**Given** 用户在计划列表页面
**When** 用户点击"创建计划"按钮
**Then** 系统打开创建计划表单对话框或跳转到 `/plans/create` 页面
**And** 表单包含以下字段:
  - 标题(必填,文本输入框)
  - 描述(选填,多行文本框)
  - 优先级(必填,下拉选择:高/中/低)
  - 截止日期(选填,日期时间选择器)
**And** 表单显示"保存"和"取消"按钮

#### Scenario: 创建计划成功
**Given** 用户在创建计划表单
**When** 用户填写表单:
  - 标题:"完成项目文档"
  - 描述:"编写项目的技术文档和用户手册"
  - 优先级:"高"
  - 截止日期:"2026-01-10"
**And** 用户点击"保存"按钮
**Then** 系统验证表单数据
**And** 系统发送 POST 请求到 `/api/plans`
**And** 系统显示成功提示:"计划创建成功"
**And** 系统关闭表单或跳转到计划列表页面
**And** 新创建的计划显示在列表中

#### Scenario: 创建计划时缺少必填字段
**Given** 用户在创建计划表单
**When** 用户只填写描述,不填写标题
**And** 用户点击"保存"按钮
**Then** 系统显示表单验证错误
**And** 标题字段显示错误提示:"标题不能为空"
**And** 表单不会提交

#### Scenario: 创建计划时标题过长
**Given** 用户在创建计划表单
**When** 用户输入超过 255 个字符的标题
**And** 用户点击"保存"按钮
**Then** 系统显示表单验证错误
**And** 标题字段显示错误提示:"标题不能超过 255 个字符"

#### Scenario: 取消创建计划
**Given** 用户在创建计划表单
**When** 用户点击"取消"按钮
**Then** 系统关闭表单或跳转到计划列表页面
**And** 表单数据不会保存

### Requirement: 编辑计划表单
前端 MUST 提供编辑计划表单,允许用户修改计划信息。

#### Scenario: 打开编辑计划表单
**Given** 用户在计划详情页面
**When** 用户点击"编辑"按钮
**Then** 系统打开编辑计划表单对话框或跳转到 `/plans/:id/edit` 页面
**And** 表单预填充当前计划的信息:
  - 标题:"完成项目文档"
  - 描述:"编写项目的技术文档和用户手册"
  - 优先级:"高"
  - 截止日期:"2026-01-10"
**And** 表单显示"保存"和"取消"按钮

#### Scenario: 编辑计划成功
**Given** 用户在编辑计划表单
**When** 用户修改标题为"完成项目文档(更新)"
**And** 用户点击"保存"按钮
**Then** 系统验证表单数据
**And** 系统发送 PUT 请求到 `/api/plans/:id`
**And** 系统显示成功提示:"计划更新成功"
**And** 系统关闭表单或跳转到计划详情页面
**And** 计划信息已更新

#### Scenario: 编辑计划时字段验证失败
**Given** 用户在编辑计划表单
**When** 用户清空标题字段
**And** 用户点击"保存"按钮
**Then** 系统显示表单验证错误
**And** 标题字段显示错误提示:"标题不能为空"

#### Scenario: 取消编辑计划
**Given** 用户在编辑计划表单
**When** 用户点击"取消"按钮
**Then** 系统关闭表单或跳转到计划详情页面
**And** 计划信息不会更新

### Requirement: 删除计划
前端 MUST 提供删除计划功能,并在删除前显示确认对话框。

#### Scenario: 删除计划
**Given** 用户在计划详情页面
**When** 用户点击"删除"按钮
**Then** 系统显示确认对话框
**And** 对话框显示提示信息:"确定要删除此计划吗?此操作不可恢复。"
**And** 对话框显示"确定"和"取消"按钮
**When** 用户点击"确定"按钮
**Then** 系统发送 DELETE 请求到 `/api/plans/:id`
**And** 系统显示成功提示:"计划删除成功"
**And** 系统跳转到计划列表页面
**And** 计划从列表中移除

#### Scenario: 取消删除计划
**Given** 用户在计划详情页面
**When** 用户点击"删除"按钮
**And** 系统显示确认对话框
**And** 用户点击"取消"按钮
**Then** 系统关闭确认对话框
**And** 计划不会被删除

#### Scenario: 删除计划失败
**Given** 用户在计划详情页面
**When** 用户点击"删除"按钮
**And** 用户点击"确定"按钮
**And** 删除请求失败(网络错误或服务器错误)
**Then** 系统显示错误提示:"删除失败,请稍后重试"
**And** 计划不会被删除

### Requirement: 响应式设计
前端 MUST 支持响应式设计,适配桌面和移动设备。

#### Scenario: 桌面端显示
**Given** 用户使用桌面设备(屏幕宽度 ≥ 1200px)
**When** 用户访问计划列表页面
**Then** 系统显示 3 列网格布局
**And** 每个计划卡片显示完整信息

#### Scenario: 平板端显示
**Given** 用户使用平板设备(屏幕宽度 768px - 1199px)
**When** 用户访问计划列表页面
**Then** 系统显示 2 列网格布局
**And** 计划卡片适当缩小

#### Scenario: 移动端显示
**Given** 用户使用移动设备(屏幕宽度 < 768px)
**When** 用户访问计划列表页面
**Then** 系统显示 1 列列表布局
**And** 计划卡片显示关键信息
**And** 次要信息隐藏或折叠

#### Scenario: 移动端操作优化
**Given** 用户使用移动设备
**When** 用户点击计划卡片
**Then** 系统跳转到计划详情页面
**And** 操作按钮显示在页面底部,便于触摸操作
