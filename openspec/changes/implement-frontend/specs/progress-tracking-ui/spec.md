# Spec: Progress Tracking UI

## ADDED Requirements

### Requirement: 状态更新界面
前端 MUST 提供状态更新界面,允许用户更改计划状态。

#### Scenario: 在计划列表页面更新状态
**Given** 用户在计划列表页面
**When** 用户点击状态标签
**Then** 系统显示状态下拉菜单
**And** 菜单显示所有可选状态:
  - 待开始
  - 进行中
  - 已完成
  - 已取消
**When** 用户选择"进行中"
**Then** 系统发送 PATCH 请求到 `/api/plans/:id/status`
**And** 系统显示成功提示:"状态更新成功"
**And** 状态标签更新为"进行中"
**And** 更新时间刷新

#### Scenario: 状态更新失败
**Given** 用户在计划列表页面
**When** 用户更新状态
**And** 请求失败(网络错误或服务器错误)
**Then** 系统显示错误提示:"状态更新失败,请稍后重试"
**And** 状态保持不变

#### Scenario: 状态更新时显示加载状态
**Given** 用户在计划列表页面
**When** 用户更新状态
**And** 请求正在处理
**Then** 系统显示加载动画
**And** 状态标签显示加载状态
**And** 用户无法再次更新状态

### Requirement: 进度百分比输入
前端 MUST 提供进度百分比输入功能,允许用户更新计划进度。

#### Scenario: 显示进度条
**Given** 用户在计划列表页面
**When** 页面加载完成
**Then** 系统显示进度条
**And** 进度条显示当前进度百分比(如 50%)

#### Scenario: 直接输入进度百分比
**Given** 用户在计划列表页面
**When** 用户点击进度百分比数字
**Then** 系统显示输入框
**When** 用户输入 80 并按回车键
**Then** 系统验证输入值(0-100)
**And** 系统发送 PATCH 请求到 `/api/plans/:id/progress`
**And** 进度条更新为 80%

#### Scenario: 输入无效的进度值
**Given** 用户在计划列表页面
**When** 用户点击进度百分比数字
**And** 用户输入 150
**And** 用户按回车键
**Then** 系统显示错误提示:"进度必须在 0-100 之间"
**And** 进度保持不变

#### Scenario: 进度更新失败
**Given** 用户在计划列表页面
**When** 用户更新进度
**And** 请求失败(网络错误或服务器错误)
**Then** 系统显示错误提示:"进度更新失败,请稍后重试"
**And** 进度保持不变

#### Scenario: 进度更新时显示加载状态
**Given** 用户在计划列表页面
**When** 用户更新进度
**And** 请求正在处理
**Then** 系统显示加载动画
**And** 进度条显示加载状态
**And** 用户无法再次更新进度
