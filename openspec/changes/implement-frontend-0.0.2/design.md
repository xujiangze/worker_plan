# Design: 计划管理界面 (v0.0.2)

## Context

### 项目背景
v0.0.1 已完成前端项目基础架构,包括 API 集成、状态管理、公共组件和错误处理。现在需要实现计划管理界面,让用户能够管理工作计划。

### 约束条件
- 必须使用 v0.0.1 提供的基础架构
- 必须与后端 API 完全兼容
- 遵循 Vue.js 官方代码规范
- 第一版专注于桌面端体验

### 利益相关者
- 最终用户:需要简单易用的界面来管理工作计划
- 开发团队:需要清晰的代码结构和良好的可维护性

## Goals / Non-Goals

### Goals (v0.0.2)
- 实现计划列表页面
- 实现创建计划表单
- 实现编辑计划表单
- 实现删除计划功能
- 实现筛选和排序功能
- 确保良好的用户体验

### Non-Goals (v0.0.2)
- 进度跟踪界面(v0.0.3)
- 统计分析和图表展示(后续版本)
- 历史记录和变更追踪(后续版本)
- 响应式设计和移动端适配(后续版本)
- 性能优化(懒加载、虚拟滚动等)(后续版本)
- 用户认证和授权(后续版本)
- 实时更新功能(后续版本)

## Decisions

### 1. 页面布局设计
**选择**: 使用卡片布局展示计划列表
**理由**:
- 卡片布局清晰直观,易于阅读
- 每个卡片可以显示丰富的信息
- 适合桌面端体验
- 使用 Element Plus 的 Card 组件

**替代方案考虑**:
- 表格布局: 信息密度高,但不够直观
- 列表布局: 简洁,但信息展示有限

### 2. 表单设计
**选择**: 使用对话框表单
**理由**:
- 对话框表单不会离开当前页面
- 用户体验流畅
- 使用 Element Plus 的 Dialog 和 Form 组件

**替代方案考虑**:
- 独立页面表单: 功能完整,但需要页面跳转

### 3. 筛选和排序设计
**选择**: 在列表顶部添加筛选和排序工具栏
**理由**:
- 工具栏位置明显,易于访问
- 使用 Element Plus 的 Select 和 Button 组件
- 支持按状态、优先级筛选
- 支持按创建时间、截止日期排序

**替代方案考虑**:
- 侧边栏筛选: 功能强大,但占用空间
- 下拉菜单筛选: 简洁,但功能有限

### 4. 删除确认设计
**选择**: 使用确认对话框
**理由**:
- 防止误操作
- 使用 Element Plus 的 MessageBox 组件
- 提供明确的提示信息

**替代方案考虑**:
- 直接删除: 快速,但容易误操作
- 二次确认按钮: 简单,但不够明确

### 5. 路由设计 (v0.0.2)
```
/plans                      # 计划列表
/plans/create               # 创建计划(对话框)
/plans/:id/edit            # 编辑计划(对话框)
```

### 6. 组件设计 (v0.0.2)
```
views/
├── PlanList.vue            # 计划列表页面
└── PlanForm.vue            # 计划表单(创建/编辑)
```

### 7. 状态管理 (v0.0.2)
使用 v0.0.1 提供的 plan store:
- `plans`: 计划列表
- `currentPlan`: 当前编辑的计划
- `loading`: 加载状态
- `error`: 错误信息

### 8. API 调用 (v0.0.2)
使用 v0.0.1 提供的 API 函数:
- `getPlans()`: 获取计划列表
- `getPlan(id)`: 获取单个计划
- `createPlan(data)`: 创建计划
- `updatePlan(id, data)`: 更新计划
- `deletePlan(id)`: 删除计划

### 9. 公共组件使用 (v0.0.2)
使用 v0.0.1 提供的公共组件:
- `StatusBadge`: 状态标签
- `PriorityBadge`: 优先级标签
- `Loading`: 加载动画

### 10. 错误处理 (v0.0.2)
使用 v0.0.1 提供的错误处理机制:
- HTTP 错误:在响应拦截器中统一处理
- 表单验证:使用 Element Plus 的表单验证规则
- 成功提示:使用 ui store 的 showNotification action

## Risks / Trade-offs

### Risk 1: 表单验证复杂度
**风险**: 表单验证规则可能过于复杂,导致用户体验不佳
**缓解措施**:
- 使用 Element Plus 的表单验证规则
- 提供清晰的错误提示
- 实时验证,避免提交时才发现错误

### Trade-off 1: 对话框表单 vs 独立页面表单
**选择**: 使用对话框表单
**权衡**:
- 优点:用户体验流畅,不需要页面跳转
- 缺点:表单内容较多时可能不够宽敞
- 决策:优先使用对话框表单,必要时使用独立页面

### Trade-off 2: 卡片布局 vs 表格布局
**选择**: 使用卡片布局
**权衡**:
- 优点:清晰直观,信息展示丰富
- 缺点:信息密度较低,占用空间较大
- 决策:优先使用卡片布局,必要时提供表格视图

## Migration Plan (v0.0.2)

### 阶段 1: 计划列表页面
1. 创建 PlanList.vue 组件
2. 实现计划列表展示(卡片布局)
3. 实现加载状态和空状态
4. 实现筛选和排序功能

### 阶段 2: 创建计划表单
1. 创建 PlanForm.vue 组件
2. 实现表单字段(标题、描述、优先级、截止日期)
3. 实现表单验证
4. 实现创建计划功能

### 阶段 3: 编辑计划表单
1. 复用 PlanForm.vue 组件
2. 实现表单预填充
3. 实现编辑计划功能

### 阶段 4: 删除计划功能
1. 实现删除按钮
2. 实现确认对话框
3. 实现删除计划功能

### 阶段 5: 路由配置
1. 配置 `/plans` 路由
2. 配置 `/plans/create` 路由
3. 配置 `/plans/:id/edit` 路由

### 阶段 6: 测试和优化
1. 测试所有功能
2. 优化用户体验
3. 修复 bug
