# Design: 进度跟踪界面 (v0.0.3)

## Context

### 项目背景
v0.0.1 已完成前端项目基础架构,v0.0.2 已完成计划管理界面。现在需要实现进度跟踪界面,让用户能够更新计划状态和进度。

### 约束条件
- 必须使用 v0.0.1 提供的基础架构
- 必须使用 v0.0.2 提供的计划列表页面
- 必须与后端 API 完全兼容
- 遵循 Vue.js 官方代码规范
- 第一版专注于桌面端体验

### 利益相关者
- 最终用户:需要方便地更新计划状态和进度
- 开发团队:需要清晰的代码结构和良好的可维护性

## Goals / Non-Goals

### Goals (v0.0.3)
- 实现状态更新功能
- 实现进度更新功能
- 实现进度条组件
- 实现到期提醒功能
- 确保良好的用户体验

### Non-Goals (v0.0.3)
- 统计分析和图表展示(后续版本)
- 历史记录和变更追踪(后续版本)
- 响应式设计和移动端适配(后续版本)
- 性能优化(懒加载、虚拟滚动等)(后续版本)
- 用户认证和授权(后续版本)
- 实时更新功能(后续版本)

## Decisions

### 1. 状态更新设计
**选择**: 在计划卡片上使用下拉菜单更新状态
**理由**:
- 下拉菜单直观易用
- 不需要离开当前页面
- 使用 Element Plus 的 Dropdown 组件

**替代方案考虑**:
- 独立页面: 功能完整,但需要页面跳转
- 对话框: 功能完整,但操作步骤较多

### 2. 进度更新设计
**选择**: 在进度条上直接点击输入进度百分比
**理由**:
- 操作简单直观
- 不需要离开当前页面
- 使用 Element Plus 的 InputNumber 组件

**替代方案考虑**:
- 滑块: 直观,但精度较低
- 对话框: 功能完整,但操作步骤较多

### 3. 进度条设计
**选择**: 使用 Element Plus 的 Progress 组件
**理由**:
- 组件功能完善
- 支持百分比显示
- 支持颜色自定义
- 支持动画效果

**替代方案考虑**:
- 自定义进度条: 灵活,但开发成本高

### 4. 到期提醒设计
**选择**: 在计划卡片上显示到期提醒标签
**理由**:
- 提醒信息明显
- 不需要额外操作
- 使用 Element Plus 的 Tag 组件

**替代方案考虑**:
- 弹窗提醒: 明显,但可能打扰用户
- 通知中心: 功能完整,但需要额外开发

### 5. 组件设计 (v0.0.3)
```
components/
└── ProgressBar.vue          # 进度条组件(可选,可使用 Element Plus Progress)
```

### 6. 状态管理 (v0.0.3)
使用 v0.0.1 提供的 plan store:
- `plans`: 计划列表
- `loading`: 加载状态
- `error`: 错误信息

### 7. API 调用 (v0.0.3)
使用 v0.0.1 提供的 API 函数:
- `updatePlanStatus(id, status)`: 更新计划状态
- `updatePlanProgress(id, progress)`: 更新计划进度

### 8. 公共组件使用 (v0.0.3)
使用 v0.0.1 提供的公共组件:
- `StatusBadge`: 状态标签
- `Loading`: 加载动画

### 9. 错误处理 (v0.0.3)
使用 v0.0.1 提供的错误处理机制:
- HTTP 错误:在响应拦截器中统一处理
- 表单验证:使用 Element Plus 的表单验证规则
- 成功提示:使用 ui store 的 showNotification action

## Risks / Trade-offs

### Risk 1: 进度更新冲突
**风险**: 多个用户同时更新进度可能导致冲突
**缓解措施**:
- 使用乐观更新
- 更新失败时回滚
- 显示加载状态,防止重复操作

### Trade-off 1: 下拉菜单 vs 独立页面
**选择**: 使用下拉菜单
**权衡**:
- 优点:操作简单,不需要页面跳转
- 缺点:功能有限,不适合复杂操作
- 决策:优先使用下拉菜单,必要时使用独立页面

### Trade-off 2: 直接输入 vs 滑块
**选择**: 使用直接输入
**权衡**:
- 优点:精度高,操作简单
- 缺点:需要手动输入
- 决策:优先使用直接输入,必要时提供滑块选项

## Migration Plan (v0.0.3)

### 阶段 1: 状态更新功能
1. 在计划卡片上添加状态下拉菜单
2. 实现状态更新 API 调用
3. 实现加载状态和错误处理

### 阶段 2: 进度更新功能
1. 在进度条上添加输入功能
2. 实现进度更新 API 调用
3. 实现加载状态和错误处理

### 阶段 3: 进度条组件
1. 创建 ProgressBar 组件(可选)
2. 实现进度条显示
3. 实现进度条动画

### 阶段 4: 到期提醒功能
1. 实现到期日期计算
2. 在计划卡片上显示到期提醒标签
3. 实现到期提醒样式

### 阶段 5: 测试和优化
1. 测试所有功能
2. 优化用户体验
3. 修复 bug
