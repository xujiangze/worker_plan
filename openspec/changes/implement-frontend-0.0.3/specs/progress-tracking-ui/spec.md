# Spec: Progress Tracking UI

## ADDED Requirements

### Requirement: 状态更新界面
前端 MUST 提供状态更新界面,允许用户更改计划状态。

#### Scenario: 在计划列表页面更新状态
**Given** 用户在计划列表页面
**When** 用户点击状态标签
**Then** 系统显示状态下拉菜单
**And** 菜单显示所有可选状态:
  - 待开始
  - 进行中
  - 已完成
  - 已取消
**When** 用户选择"进行中"
**Then** 系统发送 PATCH 请求到 `/api/plans/:id/status`
**And** 系统显示成功提示:"状态更新成功"
**And** 状态标签更新为"进行中"
**And** 更新时间刷新

#### Scenario: 状态更新失败
**Given** 用户在计划列表页面
**When** 用户更新状态
**And** 请求失败(网络错误或服务器错误)
**Then** 系统显示错误提示:"状态更新失败,请稍后重试"
**And** 状态保持不变

#### Scenario: 状态更新时显示加载状态
**Given** 用户在计划列表页面
**When** 用户更新状态
**And** 请求正在处理
**Then** 系统显示加载动画
**And** 状态标签显示加载状态
**And** 用户无法再次更新状态

### Requirement: 进度百分比输入
前端 MUST 提供进度百分比输入功能,允许用户更新计划进度。

#### Scenario: 显示进度条
**Given** 用户在计划列表页面
**When** 页面加载完成
**Then** 系统显示进度条
**And** 进度条显示当前进度百分比(如 50%)

#### Scenario: 直接输入进度百分比
**Given** 用户在计划列表页面
**When** 用户点击进度百分比数字
**Then** 系统显示输入框
**When** 用户输入 80 并按回车键
**Then** 系统验证输入值(0-100)
**And** 系统发送 PATCH 请求到 `/api/plans/:id/progress`
**And** 进度条更新为 80%

#### Scenario: 输入无效的进度值
**Given** 用户在计划列表页面
**When** 用户点击进度百分比数字
**And** 用户输入 150
**And** 用户按回车键
**Then** 系统显示错误提示:"进度必须在 0-100 之间"
**And** 进度保持不变

#### Scenario: 进度更新失败
**Given** 用户在计划列表页面
**When** 用户更新进度
**And** 请求失败(网络错误或服务器错误)
**Then** 系统显示错误提示:"进度更新失败,请稍后重试"
**And** 进度保持不变

#### Scenario: 进度更新时显示加载状态
**Given** 用户在计划列表页面
**When** 用户更新进度
**And** 请求正在处理
**Then** 系统显示加载动画
**And** 进度条显示加载状态
**And** 用户无法再次更新进度

### Requirement: 进度条组件
前端 MUST 提供进度条组件,用于显示计划进度。

#### Scenario: 显示进度条
**Given** 计划进度为 50%
**When** 使用 `<ProgressBar :progress="50" />` 组件
**Then** 组件显示进度条
**And** 进度条填充 50%
**And** 进度条显示"50%"文字

#### Scenario: 显示不同颜色的进度条
**Given** 计划进度为 80%
**When** 使用 `<ProgressBar :progress="80" color="success" />` 组件
**Then** 组件显示进度条
**And** 进度条填充 80%
**And** 进度条颜色为绿色
**And** 进度条显示"80%"文字

#### Scenario: 显示带动画的进度条
**Given** 计划进度从 50% 更新到 80%
**When** 使用 `<ProgressBar :progress="80" :animated="true" />` 组件
**Then** 组件显示进度条
**And** 进度条从 50% 动画过渡到 80%
**And** 动画时长为 0.5 秒

### Requirement: 到期提醒
前端 MUST 提供到期提醒功能,提醒用户即将到期或已过期的计划。

#### Scenario: 显示已过期提醒
**Given** 计划截止日期为 2026-01-01
**And** 当前日期为 2026-01-05
**When** 用户在计划列表页面
**Then** 系统显示"已过期"标签
**And** 标签颜色为红色
**And** 标签样式为圆角矩形

#### Scenario: 显示即将到期提醒
**Given** 计划截止日期为 2026-01-10
**And** 当前日期为 2026-01-05
**When** 用户在计划列表页面
**Then** 系统显示"即将到期"标签
**And** 标签颜色为橙色
**And** 标签样式为圆角矩形

#### Scenario: 不显示到期提醒
**Given** 计划截止日期为 2026-01-20
**And** 当前日期为 2026-01-05
**When** 用户在计划列表页面
**Then** 系统不显示到期提醒标签

#### Scenario: 不显示到期提醒(无截止日期)
**Given** 计划没有设置截止日期
**When** 用户在计划列表页面
**Then** 系统不显示到期提醒标签
